{% extends "templates/web.html" %}

{% block page_content %}
<div class="portal-wrapper">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>{{ _("Members") }}</h1>
        <button class="btn btn-primary" onclick="newMember()">{{ _("New Member") }}</button>
    </div>

    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>{{ _("Name") }}</th>
                    <th>{{ _("Email") }}</th>
                    <th>{{ _("Phone") }}</th>
                    <th>{{ _("Status") }}</th>
                    <th>{{ _("Actions") }}</th>
                </tr>
            </thead>
            <tbody>
                {% for member in members %}
                <tr>
                    <td>{{ member.full_name }}</td>
                    <td>{{ member.email }}</td>
                    <td>{{ member.phone }}</td>
                    <td>
                        <span class="badge {% if member.status == 'Active' %}badge-success{% else %}badge-warning{% endif %}">
                            {{ member.status }}
                        </span>
                    </td>
                    <td>
                        <button class="btn btn-sm btn-info" onclick="viewMember('{{ member.name }}')">
                            {{ _("View") }}
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
function newMember() {
    frappe.new_doc('Member', true);
}

function viewMember(name) {
    window.location.href = '/my-portal/member/' + name;
}
</script>
{% endblock %}

{% block style %}
<style>
.portal-wrapper {
    padding: 2rem;
}
.badge-success {
    background-color: #28a745;
    color: white;
}
.badge-warning {
    background-color: #ffc107;
    color: black;
}
</style>
{% endblock %}
